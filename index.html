<!DOCTYPE html>
<html lang="PT-BR" ng-app="ticTacToe">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="_css/estilo.css"/>
    <link rel="shortcut icon" href="_css/tic-tac-toe.png" type="image/x-icon"/>
    <title>Jogo da velha</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.js"></script>

    <script>
        angular.module("ticTacToe", []);

        angular.module("ticTacToe").controller("ticTacToeCtrl", function ($scope, $http) {
            $scope.game = {};
            $scope.letsStart = function (game) {
                if (!$scope.game.player || $scope.game.player === "") {
                    $scope.game.player = 1;
                }
                if (!$scope.game.init || $scope.game.init === "") {
                    $scope.game.init = 3;
                }

                const apiPath = 'http://localhost/Jogo-da-velha-V3/src/API/';

                $http.post(apiPath + 'initialGamePost.php', game).then(function () {
                    //$location.path('/game');
                    console.log('deu certo');
                }, function (response) {
                    alert("Erro ao iniciar jogo " + response);
                })
            }
        });
    </script>
</head>

<body class="conteudo-body">
<div class="conteudo" ng-controller="ticTacToeCtrl">
    <h1>
        <span class="x"><b>--X</b></span>
            <span class="o"><b>O </b></span>
                Jogo da velha
            <span class="o"><b> O</b></span>
        <span class="x"><b>X--</b></span>
    </h1>

    <form class="center" name="gameForm">
        <fieldset class="inicio">
            <legend>Modo de jogo:</legend>
            <div class="btn-group btn-full" role="group" aria-label="Basic radio toggle button group">
                <input type="radio" class="btn-check" ng-model="game.player" id="singlePlayer"
                    autocomplete="off" ng-value="1" ng-checked="true">
                <label class="btn btn-outline-primary" for="singlePlayer">Single Player</label>

                <input type="radio" class="btn-check" ng-model="game.player" id="2players"
                    autocomplete="off" ng-value="2">
                <label class="btn btn-outline-primary" for="2players">Multi Player Local</label>
            </div>

            <div ng-show="game.player != 2">
                <legend>Dificuldade:</legend>
                <input type="range" class="form-range" ng-model="game.difficulty" min="1" max="3" id="difficulty">
                <label for="difficulty" class="form-label"></label>
            </div>

            <legend>Quem come√ßa?</legend>
            <div class="btn-group btn-full" role="group" aria-label="Basic radio toggle button group">
                <input type="radio" class="btn-check" ng-model="game.init" id="initX"
                    autocomplete="off" ng-value="1">
                <label class="btn btn-outline-primary" for="initX">X</label>

                <input type="radio" class="btn-check" ng-model="game.init" id="initO"
                    autocomplete="off" ng-value="2">
                <label class="btn btn-outline-primary" for="initO">O</label>

                <input type="radio" class="btn-check" ng-model="game.init" id="initRand"
                    autocomplete="off" ng-value="3" ng-checked="true">
                <label class="btn btn-outline-primary" for="initRand">Tanto faz!!!</label>
            </div>
        </fieldset>

        <br>

        <button class="btn btn-outline-dark btn-sm btn-full" ng-on-click="letsStart(game)">Bora Jogar!</button>
    </form>
</div>
</body>
</html>